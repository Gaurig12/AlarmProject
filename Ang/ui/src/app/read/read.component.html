<body>
    <div *ngIf="alarms">
        <li *ngFor="let alarm of alarms"></li>
        <div class="row">
            <div class="column1" style="background-color:#f7f4f4;">

                <h5 class="recent"> Sort by Recent</h5>
                <h2 style="margin-bottom: 2rem;">My Alarms</h2>

                <h5 style="margin-top: -10px;">Filter</h5>


                <li *ngFor="let alarm of alarms">
                    <div (click)="editAlarm(alarm)" class="button-table">
                        <div class="button-cell">
                            <div class="button-index">P1</div>
                            <div class="button-info">

                                <h2 class="button-name">{{ alarm.name }}</h2>
                                <h5 class="button-time">2 min ago</h5>
                                <h4 class="button-subheading">Downhole PT Tubing</h4>

                            </div>
                        </div>
                    </div>
                </li>

            </div>
            <div class="column2" style="background-color:#cbcbcb52;">
                <h2 *ngFor="let alarm of alarms">
                    <div *ngIf="alarm === selectedAlarm" style="margin-left: 15px;">
                        {{ alarm.name }}
                    </div>
                </h2>
                <h5 style="margin-top: -17px; margin-left: 17px;">Downhole PT Tubing</h5>
                <div class="row">
                    <div class="column1" style=" width: 70%; height: 710px;">
                        <div class="comp1" style="background-color:#fff3ff; margin-left: 10px;   margin-bottom: 20px; padding-left: 50px;">
                            <div class="header">
                                <img class="img2" src="https://static-00.iconduck.com/assets.00/arrow-right-circle-icon-512x512-2p1e2aaw.png">
                                <h2 style="margin-left: 15px; font-size: 18px;"> Review and acknowledge the issue</h2>

                                <p class="subtitle" style="margin-left: 25px;">04/26/2022</p>

                            </div>

                            <p class="text"> A decrease in pressure required to inject into the resevior was found, falling below the expected range.
                            </p>

                            <span class="dot"></span>
                            <div class="comp3">

                                <div class="lefttext">Using the table below, please review and acknowledge the issue.<br> Clicking '<b>Acknowledge</b>' will notify responsible and impacted parties. <br> Clicking '<b>Snooze</b>' will notify you again of the same alert in the
                                    next 5 minutes.</div>


                            </div>
                            <br>
                            <table class="table2">
                                <div *ngFor="let alarm of alarms">
                                    <div *ngIf="alarm === selectedAlarm">

                                        <thead>
                                            <tr>
                                                <th colspan="6">{{alarm.name}}

                                                    <img src="https://cdn0.iconfinder.com/data/icons/photography-38/64/17-512.png">
                                                    <p class="red-underline">View in Well Link RT</p>
                                                    <img class="imgarrow2" src="https://uxwing.com/wp-content/themes/uxwing/download/arrow-direction/arrow-down-icon.png">

                                                </th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="font-weight: bold;">
                                                <td style="width: 23%;">Name</td>
                                                <td style="width: 8%;">Type</td>
                                                <td style="width: 8%;">Status</td>
                                                <td style="width: 8%;">Depth</td>
                                                <td style="width: 27%;">Range</td>
                                                <td style="width: 15%;">Timestamp</td>
                                            </tr>
                                            <tr>

                                                <td>{{alarm.name}}</td>
                                                <td>{{alarm.type}}</td>
                                                <td>{{alarm.status}}</td>
                                                <td>{{alarm.depth}}</td>
                                                <td>{{alarm.name}}</td>
                                                <td>20/02/24</td>

                                            </tr>

                                        </tbody>
                                    </div>
                                </div>
                            </table>
                            <div>
                                <button class="acknowledge">Acknowledge</button>
                                <button class="snooze">Snooze</button>
                            </div>



                            <hr class="hr-2" style="margin-top: 70px; margin-left: -20px;">

                            <p class="subtitle">Comments</p>
                            <img class="imgarrow1" src="https://uxwing.com/wp-content/themes/uxwing/download/arrow-direction/arrow-down-icon.png">


                        </div>
                        <h5 style=" margin-left: 10px; font-weight: bold;">Previous Activity </h5>
                        <div class="comp2" style="background-color:#dcdada90;  margin-left: 10px; padding-left: 50px; padding-right: 25px; height: 32.5%;">
                            <div *ngFor="let alarm of alarms">
                                <div *ngIf="alarm === selectedAlarm">
                                    <img class="img2" src="assets/tick.png">
                                    <h2 style="font-size: 18px; margin-top: -9px;">Issue identified : {{alarm.name}}</h2>
                                    <p class="subtitle" style="margin-left: 25px;">04/26/2022</p>


                                    <p class="text">
                                        <span class="red-text"> 
                                            {{alarm.project}} Project > {{alarm.well}}
                                         </span> - A decrease in pressure required to inject into the resevior was found, falling below the expected range.
                                    </p> <br>

                                    <p class="text">
                                        <span class="red-text"> 
                                            Saad K., Operations Supervisor, 'Service Provider'
                                         </span> was contacted to verify if its an issue or not before action can be taken.
                                    </p> <br>

                                    <p class="text">
                                        <span class="red-text">  View Plot diagram in Well Link RT </span>
                                    </p> <br>


                                </div>
                            </div>
                            <hr class="hr-2" style="color: #adadad;  border-top: 0.1px solid#d1cece; ;
            border-bottom: 0.1px solid #d0d0d0; margin-left: -20px; margin-top: -15px;">

                            <p class="subtitle">Comments</p>
                            <img class="imgarrow1" src="https://uxwing.com/wp-content/themes/uxwing/download/arrow-direction/arrow-down-icon.png">


                        </div>
                    </div>
                    <div class="column1" style=" width: 28%; height: 750px; margin-left: 10px;">
                        <div class="column2" style="background-color:#ffffff; width: 100%; height: 445px; border-style: solid; border-color: rgba(124, 122, 122, 0.225);
            border-width: 2px; border-radius: 4px;">
                            <div class="column2" style="background-color:#eeeeee; width: 100%; height: 49px; padding: 5px;">
                                <button class="edit-btn" (click)="toggleEditForm()">
                                    <span>Edit</span>
                                </button>
                                <button class="delete-btn" (click)="openDeleteConfirmation(selectedAlarm)">
                                  <span>Delete</span>
                                </button>
                            </div>
                            <div class="modal" *ngIf="isDeleteConfirmationOpen">
                                <div class="modal-content">
                                    <p>Are you sure you want to delete this alarm?</p>
                                    <div class="button-group">
                                        <button class="btn btn-primary" (click)="deleteAlarm(selectedAlarmForDelete.id)">Yes</button>
                                        <button class="btn btn-secondary" (click)="isDeleteConfirmationOpen = false">No</button>
                                    </div>
                                </div>
                            </div>
                            <ng-container *ngIf="selectedAlarm">
                                <div class="edit-form" *ngIf="showEditForm">
                                    <h2>Edit Alarm</h2>
                                    <form (ngSubmit)="submitEditForm()" #editForm="ngForm" class="edit-form-container">
                                        <div class="form-group">
                                            <label for="name">Name:</label>
                                            <input type="text" id="name" name="name" [(ngModel)]="selectedAlarm.name" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="phase">Phase:</label>
                                            <input type="text" id="phase" name="phase" [(ngModel)]="selectedAlarm.phase" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="well">Well:</label>
                                            <input type="text" id="well" name="well" [(ngModel)]="selectedAlarm.well" required>
                                        </div>
                                        <div class="button-group">
                                            <button type="submit" class="btn btn-primary">Save</button>
                                            <button type="button" class="btn btn-secondary" (click)="cancelEdit()">Cancel</button>
                                        </div>
                                    </form>
                                </div>

                                <table *ngIf="!showEditForm">
                                    <tr>
                                        <td>
                                            <p class="data">Issue Status: <span class="plain-text">{{selectedAlarm.status}}</span></p>
                                            <p class="data">Issue ID: <span class="plain-text">{{ selectedAlarm.id }}</span></p>
                                            <p class="data">Issue Type: <span class="plain-text">{{ selectedAlarm.type }}</span></p>
                                            <p class="data">Phase: <span class="plain-text">{{ selectedAlarm.phase }}</span></p>
                                            <p class="data">Issue Level: <span class="plain-text">{{ selectedAlarm.level }}</span></p>
                                        </td>
                                    </tr>
                                    <hr>
                                    <tr>
                                        <td>
                                            <p class="data">Storage Project: <span class="plain-text" style="color: red;">{{ selectedAlarm.project }}</span></p>
                                            <p class="data">Well: <span class="plain-text" style="color: red;">{{ selectedAlarm.well }}</span></p>
                                            <p class="data">Service Provider: <span class="plain-text" style="color: red;">{{ selectedAlarm.sprovider }}</span></p>
                                        </td>
                                    </tr>
                                    <hr>
                                    <tr>
                                        <td>
                                            <p class="data">Total Depth: <span class="plain-text">{{ selectedAlarm.depth }}</span></p>
                                            <p class="data">Injection Depth Range: <span class="plain-text">{{ selectedAlarm.indepth }}</span></p>
                                            <p class="data">Telecom Sys Status: <span class="plain-text">{{ selectedAlarm.systatus }}</span></p>
                                        </td>
                                    </tr>
                                    <hr>
                                    <tr>
                                        <td>
                                            <p class="data">Applications : <span class="plain-text" style="color: red; line-height: 20px;">ProductionLink, WellLink, Wireline, Magnitude, JewelSuite</span> </p>

                                        </td>
                                    </tr>
                                </table>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>